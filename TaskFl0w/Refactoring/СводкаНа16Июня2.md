
## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:

1. **–ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫** - –æ—Ç–ª–∏—á–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏
2. **MVVM –æ—Å–Ω–æ–≤–∞** —É–∂–µ –∑–∞–ª–æ–∂–µ–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SwiftUI
3. **Dependency Injection** —á–µ—Ä–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
4. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Swift** - async/await, @MainActor, Combine
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º ErrorHandler
6. **Core Data –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å proper error handling

### ‚ö†Ô∏è –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ MVVM

### 1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π –≤ ViewModels**

**–ü—Ä–æ–±–ª–µ–º–∞:** `ClockViewModel` –≤—Å–µ –µ—â–µ —Å–æ–¥–µ—Ä–∂–∏—Ç 784 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞
**–†–µ—à–µ–Ω–∏–µ:** –î–∞–ª—å–Ω–µ–π—à–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è:

```swift
// –í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ ClockViewModel —Å–æ–∑–¥–∞—Ç—å:
@MainActor final class ClockViewModel: ObservableObject {
    // –¢–æ–ª—å–∫–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
    private let timeManager: TimeManagerProtocol
    private let taskRenderer: TaskRenderingProtocol
    private let userInteraction: UserInteractionProtocol
}

// –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ViewModels:
@MainActor final class TimeManagementViewModel: ObservableObject {
    // –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
}

@MainActor final class TaskRenderingViewModel: ObservableObject {
    // –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–¥–∞—á –Ω–∞ —Ü–∏—Ñ–µ—Ä–±–ª–∞—Ç–µ
}

@MainActor final class UserInteractionViewModel: ObservableObject {
    // –õ–æ–≥–∏–∫–∞ drag & drop, –∂–µ—Å—Ç—ã, –≤—ã–¥–µ–ª–µ–Ω–∏–µ
}
```

### 2. **–£–ª—É—á—à–µ–Ω–∏–µ —Å–ª–æ—è –¥–∞–Ω–Ω—ã—Ö (Repository Pattern)**

**–†–µ–∫–æ–º–µ–Ω–¥—É—é —Å–æ–∑–¥–∞—Ç—å Repository —Å–ª–æ–π:**

```swift
// TaskFl0w/Infrastructure/Repositories/TaskRepository.swift
protocol TaskRepositoryProtocol {
    func fetchTasks(for date: Date) async throws -> [Task]
    func save(_ task: Task) async throws
    func delete(_ taskId: UUID) async throws
    func update(_ task: Task) async throws
}

@MainActor
final class TaskRepository: TaskRepositoryProtocol {
    private let coreDataService: TaskService
    private let cacheService: CacheServiceProtocol
  
    // –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    // –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
}
```

### 3. **Use Cases (Business Logic Layer)**

**–î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏:**

```swift
// TaskFl0w/Infrastructure/UseCases/
protocol CreateTaskUseCaseProtocol {
    func execute(task: TaskModel) async throws -> TaskModel
}

@MainActor
final class CreateTaskUseCase: CreateTaskUseCaseProtocol {
    private let taskRepository: TaskRepositoryProtocol
    private let validationService: ValidationServiceProtocol
    private let notificationService: NotificationServiceProtocol
  
    func execute(task: TaskModel) async throws -> TaskModel {
        // 1. –í–∞–ª–∏–¥–∞—Ü–∏—è
        try await validationService.validate(task)
      
        // 2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        let savedTask = try await taskRepository.save(task)
      
        // 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        try await notificationService.scheduleNotification(for: savedTask)
      
        return savedTask
    }
}
```

### 4. **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏**

```swift
// TaskFl0w/Infrastructure/Coordination/
@MainActor
final class AppCoordinator: ObservableObject {
    @Published var navigationPath = NavigationPath()
  
    func showTaskDetail(_ task: Task) {
        navigationPath.append(TaskDetailDestination.detail(task))
    }
  
    func showSettings() {
        navigationPath.append(AppDestination.settings)
    }
}
```

### 5. **Dependency Injection Container**

```swift
// TaskFl0w/Infrastructure/DI/DIContainer.swift
final class DIContainer {
    static let shared = DIContainer()
  
    // Repositories
    lazy var taskRepository: TaskRepositoryProtocol = TaskRepository(
        coreDataService: taskService,
        cacheService: cacheService
    )
  
    // Use Cases
    lazy var createTaskUseCase: CreateTaskUseCaseProtocol = CreateTaskUseCase(
        taskRepository: taskRepository,
        validationService: validationService,
        notificationService: notificationService
    )
  
    // ViewModels
    func makeClockViewModel() -> ClockViewModel {
        ClockViewModel(
            createTaskUseCase: createTaskUseCase,
            // ... –¥—Ä—É–≥–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
        )
    }
}
```

## üìÅ –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
TaskFl0w/
‚îú‚îÄ‚îÄ Application/
‚îÇ   ‚îú‚îÄ‚îÄ TaskFl0wApp.swift
‚îÇ   ‚îî‚îÄ‚îÄ DIContainer.swift
‚îú‚îÄ‚îÄ Presentation/
‚îÇ   ‚îú‚îÄ‚îÄ iOS/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Screens/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Clock/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClockView.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ClockViewModel.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TaskList/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Settings/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Components/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Coordinators/
‚îú‚îÄ‚îÄ Domain/ (–Ω–æ–≤—ã–π —Å–ª–æ–π)
‚îÇ   ‚îú‚îÄ‚îÄ Entities/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Task.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Category.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ User.swift
‚îÇ   ‚îú‚îÄ‚îÄ UseCases/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TaskUseCases/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CategoryUseCases/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NotificationUseCases/
‚îÇ   ‚îî‚îÄ‚îÄ Repositories/ (–ø—Ä–æ—Ç–æ–∫–æ–ª—ã)
‚îî‚îÄ‚îÄ Infrastructure/
    ‚îú‚îÄ‚îÄ Repositories/ (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
    ‚îú‚îÄ‚îÄ Services/
    ‚îú‚îÄ‚îÄ CoreData/
    ‚îî‚îÄ‚îÄ Extensions/
```

## üîß –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å Domain —Å–ª–æ–π

```swift
// Domain/Entities/Task.swift
struct Task {
    let id: UUID
    let startTime: Date
    let endTime: Date
    var isCompleted: Bool
    let category: Category
  
    // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –¥–æ–º–µ–Ω–∞
    var duration: TimeInterval {
        endTime.timeIntervalSince(startTime)
    }
  
    func isOverlapping(with other: Task) -> Bool {
        // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –∑–∞–¥–∞—á
    }
}
```

### –®–∞–≥ 2: –†–∞–∑–¥–µ–ª–∏—Ç—å ViewModels –ø–æ —ç–∫—Ä–∞–Ω–∞–º

```swift
// Presentation/iOS/Screens/Clock/ClockViewModel.swift
@MainActor
final class ClockViewModel: ObservableObject {
    // –¢–æ–ª—å–∫–æ UI state –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è
    @Published var currentTime = Date()
    @Published var selectedDate = Date()
  
    private let createTaskUseCase: CreateTaskUseCaseProtocol
    private let fetchTasksUseCase: FetchTasksUseCaseProtocol
  
    // –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ç–æ–ª—å–∫–æ –¥–ª—è UI
    func createTask() {
        Task {
            await createTaskUseCase.execute(...)
        }
    }
}
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ViewModels

```swift
// ClockFaceViewModel - —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ü–∏—Ñ–µ—Ä–±–ª–∞—Ç–∞
// TaskInteractionViewModel - —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∑–∞–¥–∞—á–∞–º–∏  
// TimePickerViewModel - —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:

| –ú–µ—Ç—Ä–∏–∫–∞                     | –¢–µ–∫—É—â–µ–µ   | –¶–µ–ª—å        | –£–ª—É—á—à–µ–Ω–∏–µ |
| ---------------------------------- | ---------------- | --------------- | ------------------ |
| –†–∞–∑–º–µ—Ä ViewModels            | 784 —Å—Ç—Ä–æ–∫–∏ | <200 —Å—Ç—Ä–æ–∫ | 75% ‚Üì             |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å         | 30%              | 90%             | 300% ‚Üë            |
| –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | 40%              | 80%             | 100% ‚Üë            |
| –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞      | –°—Ä–µ–¥–Ω—è—è   | –í—ã—Å–æ–∫–∞—è  | 60% ‚Üë             |

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

1. –°–æ–∑–¥–∞—Ç—å Domain —Å–ª–æ–π —Å entities –∏ use cases
2. –†–∞–∑–¥–µ–ª–∏—Ç—å ClockViewModel –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. –î–æ–±–∞–≤–∏—Ç—å Repository pattern

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

4. –°–æ–∑–¥–∞—Ç—å DI Container
5. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
6. –£–ª—É—á—à–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

7. –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
8. –°–æ–∑–¥–∞—Ç—å offline support
9. –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É

–í–∞—à –ø—Ä–æ–µ–∫—Ç —É–∂–µ –∏–º–µ–µ—Ç –æ—Ç–ª–∏—á–Ω—É—é –æ—Å–Ω–æ–≤—É! –û—Å–Ω–æ–≤–Ω—ã–µ —É—Å–∏–ª–∏—è —Å—Ç–æ–∏—Ç –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é –±–æ–ª—å—à–∏—Ö ViewModels –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ç–∫–æ–≥–æ Domain —Å–ª–æ—è. –≠—Ç–æ —Å–¥–µ–ª–∞–µ—Ç –∫–æ–¥ –±–æ–ª–µ–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º.
